<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬è¿½çŒ´æº«æ³‰ä¹‹æ—…æ¸…å–® ğŸ‡¯ğŸ‡µ ğŸµ</title>
    <style>
        :root {
            --primary: #ff6b6b; /* æ—¥æœ¬é³¥å±…ç´… */
            --bg: #f7f9fc;
            --card: #ffffff;
            --text: #333;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 { text-align: center; font-size: 1.5rem; margin-bottom: 1rem; }
        .progress-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }
        .category {
            margin-bottom: 20px;
            background: var(--card);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .category h2 {
            margin-top: 0;
            font-size: 1.1rem;
            color: var(--primary);
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
        }
        .item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .item:last-child { border-bottom: none; }
        input[type="checkbox"] {
            transform: scale(1.3);
            margin-right: 12px;
            cursor: pointer;
        }
        label { flex-grow: 1; cursor: pointer; transition: color 0.2s; }
        input:checked + label {
            text-decoration: line-through;
            color: #aaa;
        }
        .add-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        input[type="text"] {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        .reset-btn {
            background: #999;
            width: 100%;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h1>ğŸ‡¯ğŸ‡µ 2025 å†¬å­£åŒ—é™¸è¿½çŒ´ä¹‹æ—…</h1>
    
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    <p style="text-align: center; font-size: 0.9rem; color: #666;">æ‰“åŒ…é€²åº¦: <span id="progressText">0%</span></p>

    <div class="add-box">
        <input type="text" id="newItemInput" placeholder="è¼¸å…¥æƒ³å¸¶çš„ç‰©å“...">
        <button onclick="addNewItem()">æ–°å¢</button>
    </div>

    <div id="listContainer">
        </div>

    <button class="reset-btn" onclick="resetList()">é‡ç½®æ‰€æœ‰æ¸…å–®</button>

    <script>
        // é è¨­æ¸…å–®è³‡æ–™ï¼šæ ¹æ“šæ‚¨çš„è¡Œç¨‹æª”æ¡ˆå®¢è£½åŒ–
        const defaultData = [
            {
                category: "ğŸ’ éš¨èº«/é‡è¦è­‰ä»¶",
                items: [
                    "è­·ç…§ (æœ‰æ•ˆæœŸ6å€‹æœˆä»¥ä¸Š)",
                    "JR åŒ—é™¸æ‹±å‹å‘¨éŠåˆ¸ (å…Œæ›åˆ¸/æ†‘è­‰)", 
                    "ç¾é‡‘ (æ—¥å¹£)",
                    "ä¿¡ç”¨å¡ (æµ·å¤–å›é¥‹é«˜)",
                    "Visit Japan Web QR Code æˆªåœ–",
                    "åŸå­ç­† (å¡«å¯«å…¥å¢ƒå¡ç”¨)"
                ]
            },
            {
                category: "â„ï¸ å†¬å­£è¡£ç‰© (12æœˆåŒ—é™¸/é•·é‡)",
                items: [
                    "é˜²é¢¨é˜²æ°´å¤–å¥— (Gore-texä½³)",
                    "ç™¼ç†±è¡£ x 3",
                    "é˜²æ»‘é´/é˜²æ°´é‹ (é‡çŒ¿å…¬è‹‘æ­¥é“æœ‰é›ª)",
                    "ç¾Šæ¯›è¥ª/åšè¥ª",
                    "åœå·¾/è„–åœ",
                    "è§¸æ§æ‰‹å¥— (æ‹ç…§ä¸ç”¨è„«)",
                    "æ¯›å¸½ (é®è€³)"
                ]
            },
            {
                category: "ğŸ”Œ é›»å­/3C",
                items: [
                    "ç¶²å¡/eSIM (é–‹é€šç¢ºèª)",
                    "è¡Œå‹•é›»æº (ä½æº«è€—é›»å¿«ï¼Œå»ºè­°å¸¶å…©é¡†)",
                    "æ‰‹æ©Ÿå……é›»ç·š/é ­",
                    "ç›¸æ©Ÿ/GoPro",
                    "è½‰æ¥é ­ (æ—¥æœ¬å…©å­”æ‰æ’)"
                ]
            },
            {
                category: "ğŸ’Š è—¥å¦/é›œç‰©",
                items: [
                    "å¸¸å‚™è—¥ (æ„Ÿå†’/æ­¢ç—›/è…¸èƒƒ)",
                    "è­·å”‡è†/è­·æ‰‹éœœ (æ—¥æœ¬æ¥µä¹¾)",
                    "æš–æš–åŒ… (è²¼å¼/æ¡å¼)",
                    "æ‘ºç–Šå‚˜ (é‡‘æ¾¤è™Ÿç¨±'é€£ä¾¿ç•¶å¿˜è¨˜éƒ½ä¸èƒ½å¿˜è¨˜å‚˜')",
                    "å£“ç¸®è¢‹ (ç¯€çœç©ºé–“)"
                ]
            }
        ];

        let appData = JSON.parse(localStorage.getItem('japanPackingList')) || defaultData;

        function renderList() {
            const container = document.getElementById('listContainer');
            container.innerHTML = '';
            let total = 0;
            let checkedCount = 0;

            appData.forEach((cat, catIndex) => {
                const catDiv = document.createElement('div');
                catDiv.className = 'category';
                
                const title = document.createElement('h2');
                title.textContent = cat.category;
                catDiv.appendChild(title);

                cat.items.forEach((item, itemIndex) => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'item';
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = `item-${catIndex}-${itemIndex}`;
                    
                    // æª¢æŸ¥æ˜¯å¦æ˜¯ç‰©ä»¶æ ¼å¼ï¼ˆæ–°ç‰ˆï¼‰é‚„æ˜¯ç´”å­—ä¸²ï¼ˆèˆŠç‰ˆç›¸å®¹ï¼‰
                    const isChecked = typeof item === 'object' ? item.checked : false;
                    const itemText = typeof item === 'object' ? item.name : item;

                    checkbox.checked = isChecked;
                    checkbox.onchange = () => toggleCheck(catIndex, itemIndex);

                    const label = document.createElement('label');
                    label.htmlFor = `item-${catIndex}-${itemIndex}`;
                    label.textContent = itemText;

                    itemDiv.appendChild(checkbox);
                    itemDiv.appendChild(label);
                    catDiv.appendChild(itemDiv);

                    total++;
                    if(isChecked) checkedCount++;
                });

                container.appendChild(catDiv);
            });

            updateProgress(checkedCount, total);
        }

        function toggleCheck(catIndex, itemIndex) {
            const item = appData[catIndex].items[itemIndex];
            if (typeof item === 'string') {
                appData[catIndex].items[itemIndex] = { name: item, checked: true };
            } else {
                appData[catIndex].items[itemIndex].checked = !item.checked;
            }
            saveAndRender();
        }

        function addNewItem() {
            const input = document.getElementById('newItemInput');
            const val = input.value.trim();
            if (!val) return;

            // é è¨­åŠ åˆ°ç¬¬ä¸€å€‹é¡åˆ¥ï¼Œæˆ–æ‚¨å¯ä»¥æ–°å¢ä¸€å€‹ã€Œå…¶ä»–ã€é¡åˆ¥
            if(typeof appData[0].items[0] === 'string') {
                 // ç°¡å–®è½‰æ›èˆŠè³‡æ–™æ ¼å¼ä»¥å…å ±éŒ¯
                 appData.forEach(c => c.items = c.items.map(i => ({name: i, checked: false})));
            }
            
            appData[0].items.push({ name: val, checked: false });
            input.value = '';
            saveAndRender();
        }

        function updateProgress(checked, total) {
            const percent = total === 0 ? 0 : Math.round((checked / total) * 100);
            document.getElementById('progressBar').style.width = percent + '%';
            document.getElementById('progressText').textContent = `${percent}% (${checked}/${total})`;
        }

        function saveAndRender() {
            localStorage.setItem('japanPackingList', JSON.stringify(appData));
            renderList();
        }

        function resetList() {
            if(confirm('ç¢ºå®šè¦é‡ç½®æ‰€æœ‰æ¸…å–®å—ï¼Ÿæ‚¨çš„å‹¾é¸ç´€éŒ„å°‡æœƒæ¶ˆå¤±ã€‚')) {
                localStorage.removeItem('japanPackingList');
                location.reload(); // é‡æ–°æ•´ç†é é¢è¼‰å…¥é è¨­å€¼
            }
        }

        // åˆå§‹åŒ–è³‡æ–™çµæ§‹è½‰æ›ï¼ˆå¦‚æœç¬¬ä¸€æ¬¡åŸ·è¡Œï¼‰
        appData.forEach(cat => {
            cat.items = cat.items.map(item => {
                return typeof item === 'string' ? { name: item, checked: false } : item;
            });
        });

        renderList();
    </script>
</body>
</html>
